#CrmArMgt@SaveARInfo
--CrmArMgt@SaveARInfoUPDATE CRM_CUST_MST   SET INFO_YMD = '@INFO_YMD'      ,STOP_YMD = '@STOP_YMD'      ,CREDIT_YMD = '@CREDIT_YMD' WHERE CUST_CD = '@CUST_CD'
#CrmArMgt@SaveCustomerInfo
--CrmArMgt@SaveCustomerInfoUPDATE CRM_CUST_MST   SET AR_TYPE = '@AR_TYPE'      ,ISSUE_TYPE = '@ISSUE_TYPE'      ,CREDIT_PIC_NM = '@CREDIT_PIC_NM'      ,INFO_YMD = '@INFO_YMD'      ,STOP_YMD = '@STOP_YMD'      ,CREDIT_YMD = '@CREDIT_YMD'      ,USE_YN = '@USE_YN'      ,UPD_USR = '@USR_ID'	  ,UPD_YMD = TO_CHAR(SYSDATE,'yyyyMMdd')	  ,UPD_HM = TO_CHAR(SYSDATE,'HH24MISS') WHERE CUST_CD = '@CUST_CD'
#CrmArMgt@Search
--CrmArMgt@SearchSELECT 'N' AS CHK_FLAG	  ,AR.CUST_CD	  ,AR.CUST_NM	  ,AR.CRN	  ,AR.SVC_CD	  ,AR.AR_TYPE	  ,AR.ISSUE_TYPE	  ,AR.SALES_NM2 AS SALES_NM      ,AR.MATN_AMT      ,AR.OUTSTAND_AMT      ,AR.CREDIT_DAYS      ,AR.AR_SEND_YN      ,AR.STOP_SEND      ,AR.CFRM_SEND      ,AR.AR_CNT      ,CASE WHEN USE_YN = 'N' THEN 'Y'            WHEN CREDIT_YMD IS NOT NULL AND CREDIT_YMD > SYSDATE THEN 'N'             WHEN INFO_YMD <= SYSDATE THEN 'Y'             ELSE 'N'         END INFO_YN      ,AR.INFO_YMD      ,CASE WHEN USE_YN = 'N' THEN 'Y'            WHEN CREDIT_YMD IS NOT NULL AND CREDIT_YMD > SYSDATE THEN 'N'             WHEN STOP_YMD <= SYSDATE THEN 'Y'             ELSE 'N'         END STOP_YN      ,AR.STOP_YMD      ,AR.CREDIT_YMD      ,AR.CREDIT_PIC_NM      ,AR.USE_YN      ,AR.RNPAY_YMD  FROM   (	SELECT A.CUST_CD	      ,A.CUST_LOC_NM AS CUST_NM	      ,A.CRN          ,(SELECT DISTINCT WM_CONCAT(UFN_TABLE_ITEM('COM_CODE',C.SVC_CD,'C01',''))                 FROM CRM_CUST_SVC C                           WHERE C.CUST_CD = A.CUST_CD                  AND C.CTRT_END_YMD IS NULL) AS SVC_CD          ,(SELECT DISTINCT WM_CONCAT(SALES_NM)                 FROM CRM_CUST_SVC C                           WHERE C.CUST_CD = A.CUST_CD                  AND C.CTRT_END_YMD IS NULL) AS SALES_NM2	      ,A.AR_TYPE	      ,A.ISSUE_TYPE	      ,A.MATN_AMT	      ,NVL(O.OUTSTAND_AMT,0) AS OUTSTAND_AMT	      ,A.CREDIT_DAYS	      ,'' AS AR_SEND_YN	      ,'' AS STOP_SEND	      ,'' AS CFRM_SEND          --,'20191015' AS INFO_YMD          --,'20191031' AS EXP_STOP_YMD          ,CASE WHEN A.CREDIT_YMD < TO_CHAR(SYSDATE,'YYYYMMDD') THEN '' ELSE A.CREDIT_YMD END AS CREDIT_YMD	      ,A.CREDIT_PIC_NM	      ,A.USE_YN          ,O.RNPAY_YMD
          ,O.AR_CNT          ,(CASE WHEN O.AR_CNT > 2 THEN (CASE WHEN A.INFO_YMD IS NOT NULL THEN A.INFO_YMD ELSE TO_CHAR(LAST_DAY(SYSDATE)-15,'YYYYMMDD') END) ELSE '' END) AS INFO_YMD          ,(CASE WHEN O.AR_CNT > 2 THEN (CASE WHEN A.STOP_YMD IS NOT NULL THEN A.STOP_YMD ELSE TO_CHAR(LAST_DAY(SYSDATE),'YYYYMMDD') END) ELSE '' END) AS STOP_YMD	  FROM CRM_CUST_MST A           LEFT OUTER JOIN VT_CRM_CUST_MST O                   ON  A.CUST_CD = O.CUST_CD	 WHERE A.CUST_TYPE = 'C'	   --AND A.MATN_YN = 'Y'	   --AND O.OUTSTAND_AMT <> 0	   [CRN]	   AND A.CRN = '@CRN'	   [/CRN]	   [CUST_CD]	   AND A.CUST_CD = '@CUST_CD'	   [/CUST_CD]	   [USE_YN]	   AND A.USE_YN = '@USE_YN'	   [/USE_YN]	   [STOP_DELAY]	   AND A.STOP_DELAY = '@STOP_DELAY'	   [/STOP_DELAY]	   [AR_TYPE]	   AND A.AR_TYPE = '@AR_TYPE'	   [/AR_TYPE]	   [ISSUE_TYPE]	   AND A.ISSUE_TYPE = '@ISSUE_TYPE'	   [/ISSUE_TYPE]      ) AR WHERE 1=1   [STOP_Y]   AND AR.AR_CNT > 2   [/STOP_Y]   [STOP_N]   AND AR.AR_CNT <= 2   [/STOP_N]   [OVERDUE_TYPE_M3A0]   AND (AR.AR_CNT >= 3 AND AR.OUTSTAND_AMT > 0)   [/OVERDUE_TYPE_M3A0] ORDER BY AR.OUTSTAND_AMT DESC,AR.AR_CNT DESC, AR.CUST_CD
#CrmArMgt@SearchArList
--CrmArMgt@SearchArListSELECT A.SLIP_YMD AS SLIP_YMD      ,MAX(A.BAL_LOC_AMT - A.RNPAY_LOC_AMT) AS BAL_LOC_AMT      ,(SELECT MAX(RMK) FROM ACT_SLIP_DTL@DL_ELVIS WHERE SLIP_NO = A.SLIP_NO AND ACCT_CD = '1115') AS RMK  FROM ACT_INV_MST@DL_ELVIS A      ,ACT_INV_DTL@DL_ELVIS B WHERE A.OFFICE_CD = B.OFFICE_CD   AND A.INV_NO = B.INV_NO   AND B.FARE_CD IN ('DBR','2')   AND A.OFFICE_CD IN ('YJACC')   AND A.INV_YMD > '20171231'   AND A.INV_TYPE = 'S'   AND A.DC_TYPE = 'D'      AND A.BAL_LOC_AMT <> A.RNPAY_LOC_AMT   AND B.CUST_CD = '@CUST_CD'   AND A.SLIP_NO IS NOT NULL GROUP BY A.SLIP_YMD, A.SLIP_NO, A.INV_NO ORDER BY A.SLIP_YMD, A.SLIP_NO, A.INV_NO
#CrmArMgt@SearchCsNotice
--CrmArMgt@SeachCsNoticeSELECT NVL(P.BOARD_ID,' ') AS BOARD_ID     , NVL(P.STRT_YMD,' ') AS STRT_YMD     , NVL(P.EXP_YMD,' ')  AS EXP_YMD  FROM CRM_BOARD_MST P WHERE TO_CHAR(SYSDATE,'YYYYMMDD') BETWEEN P.STRT_YMD AND P.EXP_YMD   AND P.CS_NOTICE_YN = 'Y' ORDER BY P.BOARD_ID DESC
